# 社員向けスケジュール管理アプリ

PC、タブレット、スマートフォンに対応した社員向けスケジュール管理アプリケーションです。

## 機能概要

### 1. 月別スケジュール（1ページ目）
- 左側に日付、上側に時間（0:00-23:00、15分刻み）のグリッド表示
- マスを選択してスケジュール登録
- 登録タブ：新規登録、テンプレート、コピー
- 36色のカラーパレットから色選択
- スケジュールバーのドラッグ&ドロップ移動
- バーの左右端をドラッグしてリサイズ
- ダブルクリックで編集・削除・コピー
- キーボードショートカット（Delete、Ctrl+C、Ctrl+V）
- 部署ごとの表示管理

### 2. 日別スケジュール（2ページ目）
- 部署別の日別スケジュール表示
- リスト表示とグリッド表示の切り替え
- 部署に所属する全社員の予定確認
- ユーザー登録順での表示

### 3. 全社員スケジュール（3ページ目）
- 社員番号順での全社員表示
- 部署関係なく全社員の予定確認
- 日別の全社員スケジュール一覧

### 4. 設備予約（4ページ目）
- 設備の月別予約管理
- 設備登録機能
- 設備別の予約状況確認
- グリッド表示での予約管理

### 5. 管理機能
- 部署登録・編集・削除・並び替え
- 社員登録・編集・削除・並び替え
- 設備登録・編集・削除・並び替え

## 技術仕様

### フロントエンド
- React 18
- TypeScript
- CSS3
- レスポンシブデザイン

### バックエンド
- Node.js
- Express.js
- MySQL

### データベース
- MySQL 8.0
- ホスト: 210.131.208.22

## セットアップ

### 前提条件
- Node.js 16以上
- MySQL 8.0以上
- npm または yarn

### インストール

1. リポジトリをクローン
```bash
git clone <repository-url>
cd scheduleboard
```

2. サーバー側の依存関係をインストール
```bash
cd server
npm install
```

3. クライアント側の依存関係をインストール
```bash
cd client
npm install
```

4. 環境変数の設定
```bash
# server/.env ファイルを作成
DB_HOST=210.131.208.22
DB_USER=itoshu
DB_PASS=zatint_6487
DB_NAME=zat_sch_db
DB_PORT=3306
PORT=3000
```

### 起動方法

#### 開発環境（推奨）

1. サーバーの起動
```bash
cd server
npm start
```

2. クライアントの開発サーバー起動
```bash
cd client
npm start
```

3. ブラウザでアクセス
```
http://localhost:3000 (サーバー)
http://localhost:3001 (クライアント開発サーバー)
```

#### 本番環境

1. サーバーの起動
```bash
cd server
npm start
```

2. クライアントのビルド
```bash
cd client
npm run build
```

3. ブラウザでアクセス
```
http://localhost:3000
```

### 開発手順

#### 本番APIへの接続設定

フロントエンド開発時に本番API（https://zatint1991.com）に接続する場合：

##### CRA（Create React App）使用時

1. **プロキシ設定確認**
   - `server/client/package.json` に `"proxy": "https://zatint1991.com"` が設定済み
   - 開発時は `/api` へのリクエストが自動的に本番APIにプロキシされる

2. **起動コマンド**
   ```bash
   # 開発時（プロキシ経由）
   npm start
   
   # 本番API直接接続
   npm run start:prod
   ```

##### Vite使用時

1. **プロキシ設定確認**
   - `server/client/vite.config.ts` にプロキシ設定済み
   - 開発時は `/api` へのリクエストが自動的に本番APIにプロキシされる

2. **起動コマンド**
   ```bash
   # 開発時（プロキシ経由）
   npm run dev
   
   # 本番API直接接続
   npm run dev:prod
   ```

##### 共通設定

1. **環境変数設定**
   - 開発時: `/api` (プロキシ経由)
   - 本番時: `https://zatint1991.com/api` (直接接続)

2. **API疎通確認**
   - 開発サーバー起動後、ブラウザのコンソールでヘルスチェック結果を確認
   - `/api/health` エンドポイントが 200 で応答することを確認
   - Network タブで `/api` リクエストが本番APIにプロキシされていることを確認

3. **CORS対応**
   - `withCredentials: true` 設定により認証情報も送信
   - 本番API側でCORS設定が必要

#### トラブルシューティング

- **接続エラー**: 本番APIの稼働状況を確認
- **CORS エラー**: 本番API側のCORS設定を確認
- **プロキシエラー**: 
  - CRA: `package.json` の proxy 設定を確認
  - Vite: `vite.config.ts` の proxy 設定を確認

## 使用方法

### 基本操作

1. **部署・社員の登録**
   - 管理ボタンから部署と社員を登録
   - 部署名、社員名、社員番号を入力

2. **スケジュール登録**
   - 月別ページでマスを選択
   - 用件、開始・終了時間、色を設定
   - 登録ボタンで保存

3. **スケジュール編集**
   - スケジュールバーをダブルクリック
   - 編集・削除・コピーから選択

4. **ドラッグ&ドロップ**
   - スケジュールバーをドラッグして移動
   - 左右端をドラッグしてリサイズ

5. **キーボードショートカット**
   - Delete: 選択したスケジュールを削除
   - Ctrl+C: 選択したスケジュールをコピー
   - Ctrl+V: コピーしたスケジュールを貼り付け

### 表示機能

- **平日**: 黒文字
- **土曜日**: 青文字
- **日曜日・祝日**: 赤文字
- **祝日名**: 表示

### レスポンシブ対応

- PC: フル機能対応
- タブレット: タッチ操作対応
- スマートフォン: モバイル最適化

## データベース構造

### テーブル
- `departments`: 部署情報
- `employees`: 社員情報
- `schedules`: スケジュール情報
- `equipment`: 設備情報
- `equipment_reservations`: 設備予約情報

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## サポート

技術的な問題や機能要望については、開発チームまでお問い合わせください。 